codecov:
  require_ci_to_pass: true
  max_report_age: off
  notify:
    after_n_builds: 1
  
  # Set more realistic targets based on current coverage
  coverage:
    precision: 1
    round: down
    range: "30...100"
    status:
      project:
        default:
          target: 30%    # Current coverage level
          threshold: 1%  # Allow 1% decrease
      patch:
        default:
          target: 30%
          threshold: 1%

  # Ignore non-source files and test files
  ignore:
    - "tests/*"
    - "**/__pycache__"
    - "**/*.pyc"
    - "**/setup.py"
    - "**/__init__.py"
    - "**/benchmark.py"
    - "**/demo.py"
    - "**/example.py"
    - "**/test_*.py"
    - "**/conftest.py"
    - "**/memory_profiler.py"
    - "**/memory_utils.py"
    - "**/evaluation.py"
    - "**/benchmark_scenarios.py"
    - "**/cli.py"

  # Only include the main source files
  include:
    - "tokenizer/*.py"

  # Comment configuration
  comment:
    layout: "reach,diff,flags,files,footer"
    behavior: default
    require_changes: false
    require_base: no
    require_head: yes
